<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>LTS Web Flasher</title>
  <link rel="icon" type="image/png" href="/LogoFavicon.png" />
  <link rel="stylesheet" href="styles.css" />

</head>
<body>
  <div id="pageRoot">
    <div id="pageFadeOverlay"></div>

    <div class="header">
      <div class="header-logo">
        <img src="Logo.png" alt="LTS Logo" />
      </div>
      <div class="header-text">
        <h1 id="pageTitle">Web Flasher</h1>
        <div id="fwVersion" class="fw-version">
          <span id="fwLabel">Current firmware:</span> <span id="fwVersionValue">0.0.0</span>
        </div>
      </div>
    </div>

  <div class="flasher-card">

    <ol>
      <li id="step1">Connect your board to your computer via USB</li>
      <li id="step2">Click the connect button and choose the correct COM port</li>
      <li id="step3">Select your respooler variant from the menu</li>
      <li id="step4">Press Flash to install the firmware</li>
    </ol>
    <hr class="section-divider">

    <div class="connect-row">
      <button type="button" class="lts-btn" id="connectBtn">Connect Board</button>
    </div>

    <div id="variantSegment" class="segmented">
      <div class="seg-indicator"></div>
      <button class="seg-btn is-selected" data-value="v4">Respooler V4</button>
      <button class="seg-btn" data-value="pro">Respooler Pro</button>
    </div>

    <div id="wbUnsupported" class="note hidden">
      WebSerial is not supported in this browser. Please use Chrome or Edge on desktop.
    </div>

  </div>

    <div class="flasher-card progress-card">

    <div class="flash-row">
      <div class="flash-col-button">
        <button type="button" class="lts-btn" id="flashBtn" disabled>Flash</button>
      </div>
      <div class="flash-divider" aria-hidden="true"></div>
      <div class="flash-col-progress">
        <div id="progressWrapper" class="progress-wrapper">
          <div class="progress-header">
            <div id="progressLabel" class="progress-label">Ready</div>
            <div id="progressPercent" class="progress-percent">0%</div>
          </div>
          <div class="progress-track">
            <div id="progressBar" class="progress-bar"></div>
          </div>
        </div>
      </div>
    </div>


  </div>

  <script type="module" src="flashing-manager.js"></script>

  <footer class="page-footer">
    Powered by <a href="https://esphome.github.io/esp-web-tools/" target="_blank">ESP Web Tools</a>
    <div class="page-footer-links">
      <a class="footer-link github-link" href="https://github.com/LukasT03" target="_blank">GitHub</a>
      <a class="footer-link" href="https://lts-design.com" target="_blank">lts-design.com</a>
    </div>
  </footer>
  </div>
</body>
</html>
